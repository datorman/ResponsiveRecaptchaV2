/*@preserve
  Author: Mike Shutov
  Date: August 2019
  Description: Plugin which solves a few issues with the recaptchaV2 checkbox when it comes to styles on mobile devices and its overall ability to be styled. Also adds a few additional minor features which could be useful.
*/
function renderCaptcha(){ResponsiveRecaptcha.setState("ready"),ResponsiveRecaptcha.renderAll()}!function(){var s={},t="";ResponsiveRecaptcha=function(e){"ready"!=t&&"loading"!=t&&LoadRecaptchaAssets(),CaptchaExists(e.el)?console.log("Recaptcha Already Exists at element: "+e.el+"."):(s[e.el]=Object.settings={el:e.el,siteKey:e.sitekey,verifyCallback:e.callback||function(){},expiredCallback:e.expiredCallback||function(){},errorCallback:e.errorCallback||function(){},verified:!1,error:e.error||!1,wrapperClasses:e.wrapperClasses||"",mode:e.mode||"horizontal",theme:e.theme||"light",expiredMessage:e.expiredError||"Verification expired. Check the recaptcha again.",errorMessage:e.error||"An Error Has Occured with Recaptcha.",errorCustom:e.errorCustom||"",debug:!1,tabindex:e.tabindex||0,errorPosition:e.errorPosition||"top"},this.settings=s[e.el],"ready"===t&&ResponsiveRecaptcha.renderOne(e.el),ResponsiveChallange())},CaptchaExists=function(a){return Object.keys(s).filter(function(e){return e===a}).length},LoadRecaptchaAssets=function(){t="loading";var e=document.getElementsByTagName("script"),a="https://www.google.com/recaptcha/api.js?onload=renderCaptcha&render=explicit";for(script in e)if(e[script].src===a)return;var r=document.createElement("script");r.setAttribute("src",a),r.async=!0,r.defer=!0,document.head.appendChild(r)},ResponsiveChallange=function(){var a=setInterval(a,100);function a(){var e=document.querySelectorAll('iframe[title*="recaptcha challenge"]');e.length===ResponsiveRecaptcha.size()&&(clearInterval(a),e.forEach(function(e){e.parentNode.parentNode.classList.add("recaptcha-challange")}))}},ResponsiveRecaptchaError=function(e,a,r){var t="";"error"===a?t=s[e].errorMessage:"expired"===a?t=s[e].expiredMessage:"custom"===a&&(t=r);var c=document.querySelector("#"+e+" .responsiveRecaptcha .recaptcha-error");c.classList.add(a),c.innerHTML='<p class="message">'+t+"</p>"},ClearError=function(e){document.querySelector("#"+e+" .responsiveRecaptcha .recaptcha-error").innerHTML=""},ResetRecaptcha=function(e){grecaptcha.reset(e)},ResponsiveRecaptcha.size=function(){return Object.keys(s).length},ResponsiveRecaptcha.renderOne=function(a){var e=document.createElement("div");e.className="responsiveRecaptcha "+s[a].mode+" "+s[a].theme,e.innerHTML='<div class="recaptcha-error '+s[a].errorPosition+'"></div><div class="grecapWrapper '+s[a].wrapperClasses+'"><div class="recap"></div><div class="grecapTerms"><div class="g-recap-logo"></div><div class="g-recap-logo-text">reCAPTCHA</div><div class="g-recap-logo-links"><a href="https://www.google.com/intl/en/policies/privacy/" target="_blank">Privacy</a><span aria-hidden="true" role="presentation"> - </span><a href="https://www.google.com/intl/en/policies/terms/" target="_blank">Terms</a></div></div></div>',document.getElementById(a).appendChild(e),s[a].recaptcha=grecaptcha.render(document.querySelector("#"+a+" .recap"),{sitekey:s[a].siteKey,callback:function(e){s[a].verified=!0,s[a].successToken=e,s[a].successTimestamp=Date.now(),s[a].verifyCallback(e,s[a])},"expired-callback":function(){setTimeout(function(){ResetRecaptcha(s[a].recaptcha)},100),s[a].verified=!1,delete s[a].successToken,delete s[a].successTimestamp,ResponsiveRecaptchaError(s[a].el,"expired"),s[a].expiredCallback(s[a])},"error-callback":function(){ResponsiveRecaptchaError(s[a].el),s[a].errorCallback(s[a])},theme:s[a].theme,tabindex:s[a].tabindex}),s[a].rendered=!0,s[a].initialized=Date.now(),!0===s[a].error&&ResponsiveRecaptchaError(s[a].el,"custom",s[a].errorCustom)},ResponsiveRecaptcha.renderAll=function(){for(captcha in s)!0!==s[captcha].rendered&&ResponsiveRecaptcha.renderOne(s[captcha].el)},ResponsiveRecaptcha.setState=function(e){t=e},ResponsiveRecaptcha.getAll=function(){return s},ResponsiveRecaptcha.getBySelector=function(e){return s[e]},ResponsiveRecaptcha.prototype.reset=function(){ResetRecaptcha(this.settings.recaptcha)},ResponsiveRecaptcha.prototype.getResponse=function(){return grecaptcha.getResponse(this.settings.recaptcha)},ResponsiveRecaptcha.prototype.setError=function(e,a){return e?-1===["error","expired","custom"].indexOf(e)?console.log("Invalid Mode"):void ResponsiveRecaptchaError(this.settings.el,e,a):console.log("Please provide a mode (error,expired,custom)")},ResponsiveRecaptcha.prototype.clearError=function(){ClearError(this.settings.el)},document.querySelectorAll(".g-recaptcha").forEach(function(e){e.id||(e.id="autoResponsiveRecaptcha-"+Date.now());var a={el:e.id};for(data in e.dataset)a[data]=e.dataset[data],"error"===data&&(a[data]=!0);ResponsiveRecaptcha(a)}),window.ResponsiveRecaptcha=ResponsiveRecaptcha}();